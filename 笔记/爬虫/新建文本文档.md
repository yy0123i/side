某个网站那些页面可爬取

![image-20231130223829454](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231130223829454.png)

![image-20231201113311983](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201113311983.png)

![image-20231201113403487](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201113403487.png)

协议名://域名/路径?参数

http://www.baidu.com/user/info?username=yy

https://localhost/user/info?username=yy

##### 请求成功判断

![image-20231201114009762](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201114009762.png)

![image-20231201114024347](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201114024347.png)

##### 反爬

代码发送 会显示是python-requests，服务器端可能会拒绝

![image-20231201114340917](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201114340917.png)



修改user-agent进行伪装,让服务器认为是普通浏览器的访问

![image-20231201114429129](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201114429129.png)

```python
head ={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"}
response = requests.get("http://books.toscrape.com", headers=head)
```

##### 解析网页库

![image-20231201115659829](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201115659829.png)

![image-20231201115751539](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201115751539.png)

将html解析为

![image-20231201120013181](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201120013181.png)

```python
import requests
from bs4 import  BeautifulSoup
head ={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"}
response = requests.get("http://movie.douban.com/top250", headers=head)


soup = BeautifulSoup(response,"html.parser")
```

数据请求过程

![image-20231201123728838](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201123728838.png)

##### 1. 检查js是否存在混淆 存在0x开头

![image-20231201124047648](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201124047648.png)

2. ##### 定位加密位置或者解密

切换页面

![image-20231201130404779](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201130404779.png)



复制cbash到爬虫网站生成爬虫代码

![image-20231201130540528](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201130540528.png)

```python
https://curlconverter.com/python/ 爬虫生成网站
```

![image-20231201132241209](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201132241209.png)

有两个一般选择实例对象.实例方法的，而不是class().decrypt

打点

![image-20231201132855599](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201132855599.png)



```python
        function b(t) {
            var e = h.a.enc.Utf8.parse(r["e"])
              , n = h.a.enc.Utf8.parse(r["i"])
              , a = h.a.AES.decrypt(t, e, {
                iv: n,
                mode: h.a.mode.CBC,
                padding: h.a.pad.Pkcs7
            });
            return a.toString(h.a.enc.Utf8)
        }
    通过断点和控制台发现h.a是一个标准加密算法,那么利用CrypotoJs即可替换
```

将标准加密替换![image-20231201135440679](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201135440679.png)

gpt

[poe.com](http://poe.com/chatgpt)





##### 正则表达式

![image-20231201162524233](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201162524233.png)

```python
import re

# 1 固定字符串
text = r"123456"  # 保证正则表达式里面的符号不被处理
s = "1234567"
# text 模式串   s 需要处理的字符串
print(re.findall(text, s))

# 2 某一类字符
# 找出单个数字
text = '卖书身高:178,体重:168'
print(re.findall(r'\w', text))
# '\d' 找数字 '\D'不是数字
# \w 非标点字符
# [1-5] [高重号] [a-z]找任何一个
# 大写表否定

# 3 重复某一类字符
print(re.findall(r'\d{3}', text))
# + 表示1到多个\d 连续匹配直到不满足为止
# ？ 表示0或1个\d
# *  表示0或多个  连续匹配直到不满足为止
# {3} 匹配个数 {1,4}  1-4个数字  {1,} >=1 数字  {,8} 0-8个数字

# 4 组合level2
text = r'18610898380.15201271891,麦叔电话是18610898380，座机号是0010-12312343,18610898380'
print(re.findall(r'\d{3,4}-\d{7,8}', text))
# 匹配座机号


# 5 多种情况
# | 或 两种模式都进行匹配.

print(re.findall(r'1\d{10}|\d{4}-\d{8}',text))

# 6 限定位置
# ^ 必须是句子开头
# $ 必须在句子最后
print(re.findall('1\d{10}$', text))
print(re.findall('^1\d{10}',text))

# 7 内部约束
text = "barbar carcar yueyus"
print(re.findall(r'([a-z]{3})(\1)',text))
# \1表示和第一个括号里面的模式一样


```

![image-20231201163054241](C:\Users\86186\AppData\Roaming\Typora\typora-user-images\image-20231201163054241.png)

```python
# 难点
# 7 内部约束
text = "barbar yusyuecar yueyus"
print(re.findall(r'(?<=yus)[a-z]{3}(?!car)', text))
# 表示yus出现在前面,且car不出现在后面才匹配
print(re.findall(r'(?<=yus)[a-z]{3}(?=car)', text))
# 表示yus出现在前面,且car出现在后面才匹配
# 中间才是真正要匹配的内容
# \1表示和第一个括号里面的模式一样
# (?=) 写在后面,表示该字符出现在之后才算数 (?<=)写在前面表示该字符在之前才算数
# (?!) 写在后面,表示该字符不在后面才算数   (?<!)写在前面表示前面不出现这个才算数
# (<)要写在前面,(=要写在后面)
```

```python
(?#表示注释内容)
```

